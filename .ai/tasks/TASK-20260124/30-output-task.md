# Step 3: Task Analysis 결과

## 1. 요약

Step 2의 7개 Phase를 8개 독립 서브태스크로 분해했습니다. 의존성 최소화와 병렬 실행 가능성을 고려하여 구조화했습니다.

## 2. 분해 기준

### 적용 원칙

- **모듈 경계**: 각 컴포넌트/파일을 기능 단위로 분리
- **의존성 최소화**: DAG 구조 유지, 병렬 실행 최대화
- **적절한 크기**: 1개 태스크 = 50-200 LOC

### Phase → Task 매핑

| Phase | 설명 | Task |
|-------|------|------|
| Phase 1 | 기본 구조 변경 | 01-TASK, 02-TASK |
| Phase 2 | PathResolver 이동 | 03-TASK |
| Phase 3 | RegistryResolver 구현 | 04-TASK |
| Phase 4 | InteractivePrompt 리팩토링 | 05-TASK |
| Phase 5 | CommandHandler 단순화 | 06-TASK |
| Phase 6 | 코드 정리 | 07-TASK |
| Phase 7 | 테스트 및 문서화 | 08-TASK |

## 3. 서브태스크 목록

### P0 (Critical) - 기반 작업

| Task | 이름 | 의존성 | 차단 | LOC |
|------|------|--------|------|-----|
| 01 | 타입 정의 및 agents.json 확장 | None | 03, 04, 05 | ~100 |
| 02 | Registry 디렉토리 구조 생성 | None | 04 | ~50 |

### P1 (High) - 핵심 구현

| Task | 이름 | 의존성 | 차단 | LOC |
|------|------|--------|------|-----|
| 03 | PathResolver CLI 이동 및 확장 | 01 | 05, 06 | ~150 |
| 04 | RegistryResolver 구현 | 01, 02 | 05 | ~120 |
| 05 | InteractivePrompt 리팩토링 | 01, 03, 04 | 06 | ~200 |
| 06 | CommandHandler 단순화 | 03, 05 | 07 | ~100 |

### P2 (Medium) - 정리 작업

| Task | 이름 | 의존성 | 차단 | LOC |
|------|------|--------|------|-----|
| 07 | 레거시 코드 제거 | 06 | 08 | ~50 |
| 08 | 테스트 및 문서화 | 07 | None | ~150 |

## 4. 의존성 그래프

```
     ┌────┐    ┌────┐
     │ 01 │    │ 02 │   ← P0: 병렬 실행 가능
     └──┬─┘    └─┬──┘
        │        │
   ┌────┼────────┤
   │    │        │
   ▼    ▼        ▼
┌────┐ ┌────────────┐
│ 03 │ │     04     │   ← P1: 01,02 완료 후 병렬 가능
└──┬─┘ └─────┬──────┘
   │         │
   └────┬────┘
        │
        ▼
     ┌────┐
     │ 05 │   ← P1: 03,04 완료 후
     └──┬─┘
        │
        ▼
     ┌────┐
     │ 06 │   ← P1: 05 완료 후
     └──┬─┘
        │
        ▼
     ┌────┐
     │ 07 │   ← P2: 06 완료 후
     └──┬─┘
        │
        ▼
     ┌────┐
     │ 08 │   ← P2: 07 완료 후
     └────┘
```

## 5. 병렬 실행 계획

### Wave 1 (P0)
- **병렬**: 01-TASK, 02-TASK
- **예상**: 기반 타입과 디렉토리 구조

### Wave 2 (P1-a)
- **병렬**: 03-TASK, 04-TASK
- **조건**: Wave 1 완료 후

### Wave 3 (P1-b)
- **순차**: 05-TASK → 06-TASK
- **조건**: Wave 2 완료 후

### Wave 4 (P2)
- **순차**: 07-TASK → 08-TASK
- **조건**: Wave 3 완료 후

## 6. Critical Path

```
01 → 03 → 05 → 06 → 07 → 08
```

총 6개 태스크가 Critical Path에 있으며, 02, 04는 병렬로 진행 가능합니다.

## 7. 체크리스트 확인

- [x] 10-output-plan.md와 20-output-system-design.md 완전히 이해함
- [x] 모든 Phase(7개)가 서브태스크(8개)로 분해됨
- [x] 의존성 그래프에 순환 의존성 없음
- [x] 병렬 실행 가능한 태스크 식별됨 (01∥02, 03∥04)
- [x] 각 태스크 크기 적절함 (50-200 LOC)
- [x] TASK_MASTER.md 작성 완료
- [x] 각 TASK.md 독립적 실행 가능하게 작성됨
- [x] 진행 상황 추적 표 포함됨
